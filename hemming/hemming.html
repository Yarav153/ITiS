<html>
	<head>
		<title> my Hemming code </title>
		<script>
			function code(){
				let inpText = document.getElementById('inpMessage').value;
				inpText = inpText.split('');
				for (let i = 0; i < inpText.length; i++){
					inpText[i] = parseInt(inpText[i]);
				}
				let controlBit1 = (inpText[0] + inpText[1] + inpText[3])%2;
				let controlBit2 = (inpText[1] + inpText[2] + inpText[3])%2;
				let controlBit3 = (inpText[0] + inpText[2] + inpText[3])%2;
				document.getElementById('outMessage').value = inpText.join('') + controlBit1 + controlBit2 + controlBit3;
			}
			function decode(){
				let errorIn = 0;
				let outText = document.getElementById('outMessage').value;
				outText = outText.split('');
				for (let i = 0; i < outText.length; i++){
					outText[i] = parseInt(outText[i]);
				}
				if ((outText[0] + outText[1] + outText[3])%2 != outText[4]) errorIn += 2;
				if ((outText[1] + outText[2] + outText[3])%2 != outText[5]) errorIn += 3;
				if ((outText[0] + outText[2] + outText[3])%2 != outText[6]) errorIn += 4
				if (errorIn == 0){
					document.getElementById('origMessage').value = outText[0] + '' + outText[1] + '' + outText[2] + '' + outText[3];
					document.getElementById('placeHolder').innerText = 'no errors';
					return;
				}
				for (let i = 2; i < 5; i++){
					if (errorIn == i){
						document.getElementById('origMessage').value = outText[0] + '' + outText[1] + '' + outText[2] + '' + outText[3];
						document.getElementById('placeHolder').innerText = 'error in position ' + (i+3);
						return;
					}
				}
				if (errorIn == 5){
					if (outText[1]){
						document.getElementById('origMessage').value = outText[0] + '0' + outText[2] + '' + outText[3];
					}else document.getElementById('origMessage').value = outText[0] + '1' + outText[2] + '' + outText[3];
					document.getElementById('placeHolder').innerText = 'error in position 2';
				}else if (errorIn == 6){
					if (outText[0]){
						document.getElementById('origMessage').value = '0' + outText[1] + '' + outText[2] + '' + outText[3];
					}else document.getElementById('origMessage').value = '1' + outText[1] + '' + outText[2] + '' + outText[3];
					document.getElementById('placeHolder').innerText = 'error in position 1';
				}else if (errorIn == 7){
					if (outText[2]){
						document.getElementById('origMessage').value = outText[0] + '' + outText[1] + '0' + outText[3];
					}else document.getElementById('origMessage').value = outText[0] + '' + outText[1] + '1' + outText[3];
					document.getElementById('placeHolder').innerText = 'error in position 3';
				}else{
					if (outText[3]){
						document.getElementById('origMessage').value = outText[0] + '' + outText[1] + '' + outText[2] + '0';
					}else document.getElementById('origMessage').value = outText[0] + '' + outText[1] + '' + outText[2] + '1';
					document.getElementById('placeHolder').innerText = 'error in position 4';
				}
			}
		</script>
	</head>
	<body>
	<h1>Russkova, Hemming code</h1>
	<p><input type = 'text' id = 'inpMessage' /> input message, 4 bits </p>
	</p><input type = 'button' value = 'code' onclick = 'code()' />  </p>
	<p><input type = 'text' id = 'outMessage' /> coded message </p>
	</p><input type = 'button' value = 'check' onclick = 'decode()' />  </p>
	<p><input type = 'text' id = 'origMessage' /> original message </p>
	<p id = 'placeHolder'></p>
	</body>
</html>